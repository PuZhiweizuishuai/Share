import{a as j}from"./view-log-list-C9rkRqke.js";import{_ as P,c as m,w as t,V as L,r as M,o as f,g as A,h as V,b as e,d as n,e as s,a as y,f as p,x as g,j as d,k as u,y as S,aJ as k,l as v,F as x,A as b,aK as I,B as U,t as C,v as F,u as D,z as N}from"./index-DDk1_yXq.js";import{V as h,a as T,b as W,c as B}from"./VCard-C8mrYAc5.js";import{V as G}from"./VTextarea-DFyZY0VR.js";import"./VSelect-C5hIA0f7.js";const z={components:{ViewLogTable:j},data(){return{showAiUserDialog:!1,nowInvitationCode:{id:0},user:{username:"",password:"",oldPassword:""},snackbar:!1,message:"",ipdata:"",items:[{createUser:"mdi-share",ip:"分享列表"},{createUser:"mdi-file",ip:"文件列表"},{createUser:"mdi-text",ip:"二维码分享"},{createUser:"mdi-lock",ip:"加密解密"},{createUser:"mdi-wrench",ip:"设置"},{createUser:"mdi-help",ip:"关于"}],loginUserInfo:{},showSysInfo:!1,showLogin:!0,fileMax:0,aiConfig:"",invitationCodeList:[]}},created(){this.checkLogin()},methods:{seeAiUserlog(a){this.nowInvitationCode=a,this.showAiUserDialog=!0},checkLogin(){this.httpGet("/login/check",a=>{a.status==200?(this.showSysInfo=!0,this.showLogin=!1,this.getWhitelist(),this.getFileMax(),this.getInvitationCode(),this.getAiConfig()):(this.showSysInfo=!1,this.showLogin=!0)})},userLogin(){this.httpPost("/login",this.user,a=>{a.data!=null&&a.data!=""?(this.loginUserInfo=a.data,this.showSysInfo=!0,this.showLogin=!1,this.getWhitelist(),this.getFileMax(),this.getInvitationCode(),this.getAiConfig()):(this.message="登录失败",this.snackbar=!0)})},updatePassword(){this.httpPost("/admin/change/password",this.user,a=>{a.data!=null&&a.data!=""?(this.loginUserInfo=a.data,this.showSysInfo=!1,this.showLogin=!0):(this.message="修改失败",this.snackbar=!0)})},addWhitelIP(){this.httpPost("/admin/whitelist/add",this.ipdata,a=>{console.log(a),this.getWhitelist()})},getWhitelist(){this.httpGet("/admin/whitelist",a=>{this.items=a.data})},deleteIP(a){this.httpPost("/admin/whitelist/delete",a,l=>{this.getWhitelist()})},checkNumber(){return!(this.fileMax==null||isNaN(parseInt(this.fileMax)))},settingFileMax(){this.checkNumber()&&this.httpPost("/upload/setting/filemax?type=sysinfo",{uploadFileMax:this.fileMax},a=>{this.message=a.message,this.snackbar=!0})},getFileMax(){this.httpGet("/upload/disk",a=>{this.fileMax=a.data.uploadFileMax})},submitAiConfig(){const a={configMessage:this.aiConfig};this.httpPost("/ai/save",a,l=>{console.log(l)})},getAiConfig(){this.httpPost("/ai/config",{invitationCode:""},a=>{this.aiConfig=a.data.configMessage})},createCode(){this.httpPost("/ai/invitation",null,a=>{this.getInvitationCode()})},getInvitationCode(){this.httpGet("/ai/invitation/list",a=>{this.invitationCodeList=a.data})},deleteAICode(a){this.httpPost("/ai/invitation/delete",a,l=>{console.log(l),this.getInvitationCode()})}}};function E(a,l,J,K,o,r){const _=M("ViewLogTable");return f(),m(L,null,{default:t(()=>[A(e(n,{justify:"center",align:"center"},{default:t(()=>[e(s,null,{default:t(()=>[e(h,{class:"mx-auto",outlined:""},{default:t(()=>[e(n,{justify:"center"},{default:t(()=>[e(s,{cols:"10"},{default:t(()=>l[14]||(l[14]=[y("h2",null,"系统配置：",-1)])),_:1})]),_:1}),e(p),e(s),e(n,{justify:"center"},{default:t(()=>[e(s,{cols:"8"},{default:t(()=>[e(g,{modelValue:o.user.username,"onUpdate:modelValue":l[0]||(l[0]=i=>o.user.username=i),placeholder:"账号",label:"账号",clearable:"",variant:"underlined"},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{justify:"center"},{default:t(()=>[e(s,{cols:"8"},{default:t(()=>[e(g,{modelValue:o.user.password,"onUpdate:modelValue":l[1]||(l[1]=i=>o.user.password=i),type:"password",placeholder:"密码",label:"密码",variant:"underlined",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{justify:"center"},{default:t(()=>[e(d,{onClick:r.userLogin,color:"blue"},{default:t(()=>l[15]||(l[15]=[u(" 登录 ")])),_:1},8,["onClick"])]),_:1}),e(s)]),_:1})]),_:1})]),_:1},512),[[S,o.showLogin]]),o.showSysInfo?(f(),m(n,{key:0,justify:"center",align:"center"},{default:t(()=>[e(s,null,{default:t(()=>[e(h,{class:"mx-auto",outlined:""},{default:t(()=>[e(n,{justify:"center"},{default:t(()=>[e(s,{cols:"10"},{default:t(()=>l[16]||(l[16]=[y("h2",null,"IP白名单",-1)])),_:1})]),_:1}),e(p),e(s),e(n,{justify:"center"},{default:t(()=>[e(s,{cols:"8"},{default:t(()=>[e(k,{density:"compact"},{default:t(()=>[(f(!0),v(x,null,b(o.items,(i,w)=>(f(),m(I,{key:w,value:i,color:"primary"},{prepend:t(()=>[e(d,{color:"error",onClick:c=>r.deleteIP(i),style:{"margin-right":"32px"},density:"compact"},{default:t(()=>l[17]||(l[17]=[u(" 删除 ")])),_:2},1032,["onClick"])]),default:t(()=>[e(U,null,{default:t(()=>[u(C(i.ip)+" - 创建人："+C(i.createUser),1)]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),_:1}),e(p),e(s),e(n,{justify:"center"},{default:t(()=>[e(s,{cols:"8"},{default:t(()=>[e(g,{modelValue:o.ipdata,"onUpdate:modelValue":l[2]||(l[2]=i=>o.ipdata=i),placeholder:"IP",label:"IP",clearable:"",variant:"underlined"},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{justify:"center"},{default:t(()=>[e(s,{cols:"4"},{default:t(()=>[e(d,{onClick:r.getWhitelist},{default:t(()=>l[18]||(l[18]=[u(" 刷新 ")])),_:1},8,["onClick"])]),_:1}),e(s,{cols:"4"},{default:t(()=>[e(d,{onClick:r.addWhitelIP,color:"green"},{default:t(()=>l[19]||(l[19]=[u(" 增加 ")])),_:1},8,["onClick"])]),_:1})]),_:1}),e(s)]),_:1})]),_:1})]),_:1})):V("",!0),o.showSysInfo?(f(),m(n,{key:1,justify:"center",align:"center"},{default:t(()=>[e(s,null,{default:t(()=>[e(h,{class:"mx-auto",outlined:""},{default:t(()=>[e(n,{justify:"center"},{default:t(()=>[e(s,{cols:"10"},{default:t(()=>l[20]||(l[20]=[y("h2",null,"修改密码",-1)])),_:1})]),_:1}),e(p),e(s),e(n,{justify:"center"},{default:t(()=>[e(s,{cols:"8"},{default:t(()=>[e(g,{modelValue:o.user.username,"onUpdate:modelValue":l[3]||(l[3]=i=>o.user.username=i),placeholder:"账号",label:"账号",clearable:"",variant:"underlined"},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{justify:"center"},{default:t(()=>[e(s,{cols:"8"},{default:t(()=>[e(g,{modelValue:o.user.oldPassword,"onUpdate:modelValue":l[4]||(l[4]=i=>o.user.oldPassword=i),type:"password",placeholder:"旧密码",label:"旧密码",variant:"underlined",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{justify:"center"},{default:t(()=>[e(s,{cols:"8"},{default:t(()=>[e(g,{modelValue:o.user.password,"onUpdate:modelValue":l[5]||(l[5]=i=>o.user.password=i),type:"password",placeholder:"新密码",label:"新密码",variant:"underlined",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{justify:"center"},{default:t(()=>[e(d,{onClick:r.updatePassword},{default:t(()=>l[21]||(l[21]=[u(" 修改 ")])),_:1},8,["onClick"])]),_:1}),e(s)]),_:1})]),_:1})]),_:1})):V("",!0),o.showSysInfo?(f(),m(n,{key:2,justify:"center",align:"center"},{default:t(()=>[e(s,null,{default:t(()=>[e(h,{class:"mx-auto",outlined:""},{default:t(()=>[e(n,{justify:"center"},{default:t(()=>[e(s,{cols:"10"},{default:t(()=>l[22]||(l[22]=[y("h2",null,"上传文件大小配置",-1)])),_:1})]),_:1}),e(p),e(s),e(n,{justify:"center"},{default:t(()=>[e(s,{cols:"8"},{default:t(()=>[e(g,{variant:"underlined",modelValue:o.fileMax,"onUpdate:modelValue":l[6]||(l[6]=i=>o.fileMax=i),placeholder:"上传文件最大大小（单位：M）",label:"上传文件最大大小（单位：M）",clearable:"",rules:[()=>r.checkNumber()||"必须是数字且不为空"]},null,8,["modelValue","rules"])]),_:1}),e(s,{cols:"2"},{default:t(()=>[e(d,{color:"primary",onClick:l[7]||(l[7]=i=>r.settingFileMax())},{default:t(()=>l[23]||(l[23]=[u("修改")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):V("",!0),o.showSysInfo?(f(),m(n,{key:3,justify:"center",align:"center"},{default:t(()=>[e(s,null,{default:t(()=>[e(h,{class:"mx-auto",outlined:""},{default:t(()=>[e(n,{justify:"center"},{default:t(()=>[e(s,{cols:"10"},{default:t(()=>l[24]||(l[24]=[y("h2",null,"AI 配置",-1)])),_:1})]),_:1}),e(p),e(s),e(n,{justify:"center"},{default:t(()=>[e(s,{cols:"8"},{default:t(()=>[e(G,{label:"配置",modelValue:o.aiConfig,"onUpdate:modelValue":l[8]||(l[8]=i=>o.aiConfig=i),variant:"underlined"},null,8,["modelValue"])]),_:1}),e(s,{cols:"2"},{default:t(()=>[e(d,{color:"primary",onClick:l[9]||(l[9]=i=>r.submitAiConfig())},{default:t(()=>l[25]||(l[25]=[u("配置")])),_:1})]),_:1})]),_:1}),e(n,{justify:"center"},{default:t(()=>[e(d,{color:"primary",onClick:l[10]||(l[10]=i=>r.createCode())},{default:t(()=>l[26]||(l[26]=[u("生成邀请码")])),_:1})]),_:1}),e(s),e(n,{justify:"center"},{default:t(()=>[e(s,{cols:"8"},{default:t(()=>[e(k,{density:"compact"},{default:t(()=>[(f(!0),v(x,null,b(o.invitationCodeList,(i,w)=>(f(),m(I,{key:w,value:i,color:"primary"},{prepend:t(()=>[e(d,{color:"error",onClick:c=>r.deleteAICode(i),style:{"margin-right":"32px"},density:"compact"},{default:t(()=>l[27]||(l[27]=[u(" 删除 ")])),_:2},1032,["onClick"]),e(d,{color:"error",onClick:c=>r.seeAiUserlog(i),style:{"margin-right":"32px"},density:"compact"},{default:t(()=>l[28]||(l[28]=[u(" 查看使用日志 ")])),_:2},1032,["onClick"])]),default:t(()=>[e(U,null,{default:t(()=>[u(C(i.name),1)]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):V("",!0),e(F,{modelValue:o.showAiUserDialog,"onUpdate:modelValue":l[12]||(l[12]=i=>o.showAiUserDialog=i),"max-width":"1000"},{default:t(()=>[e(h,null,{default:t(()=>[e(T,{class:"headline"},{default:t(()=>l[29]||(l[29]=[u("邀请码使用记录")])),_:1}),e(W,null,{default:t(()=>[e(_,{target:o.nowInvitationCode.id,types:2},null,8,["target"])]),_:1}),e(B,null,{default:t(()=>[e(D),e(d,{color:"green darken-1",text:"",onClick:l[11]||(l[11]=i=>o.showAiUserDialog=!1)},{default:t(()=>l[30]||(l[30]=[u(" 关闭 ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(N,{modelValue:o.snackbar,"onUpdate:modelValue":l[13]||(l[13]=i=>o.snackbar=i),timeout:3e3,top:!0},{default:t(()=>[u(C(o.message),1)]),_:1},8,["modelValue"])]),_:1})}const X=P(z,[["render",E]]);export{X as default};
