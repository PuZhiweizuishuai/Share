import{_ as x,c as T,w as t,r as a,o as y,a as e,f as d,t as g,b as M}from"./index-oNAIta96.js";const k={data(){return{fileMax:0,snackbar:!1,message:"",editType:0,items:[{text:"Vditor(Markdown)",value:0},{text:"wangEditor(HTML)",value:1}]}},created(){this.getFileMax()},methods:{getFileMax(){fetch("/api/upload/disk",{headers:{"Content-Type":"application/json; charset=UTF-8","X-XSRF-TOKEN":this.$cookies.get("XSRF-TOKEN")},method:"GET",credentials:"include"}).then(l=>l.json()).then(l=>{this.fileMax=l.data.uploadFileMax,this.editType=l.data.editType}).catch(l=>null)},checkNumber(){return!(this.fileMax==null||isNaN(parseInt(this.fileMax)))},settingFileMax(){console.log(this.editType),this.checkNumber()&&fetch("/api/upload/setting/filemax",{headers:{"Content-Type":"application/json; charset=UTF-8","X-XSRF-TOKEN":this.$cookies.get("XSRF-TOKEN")},method:"POST",credentials:"include",body:JSON.stringify({uploadFileMax:this.fileMax,editType:this.editType})}).then(l=>l.json()).then(l=>{this.message=l.message,this.snackbar=!0}).catch(l=>null)}}},b=M("h2",null,"设置：",-1);function F(l,n,N,V,o,c){const s=a("v-col"),r=a("v-row"),f=a("v-divider"),_=a("v-text-field"),u=a("v-btn"),p=a("v-select"),m=a("v-card"),v=a("v-snackbar"),h=a("v-container");return y(),T(h,null,{default:t(()=>[e(r,{justify:"center",align:"center"},{default:t(()=>[e(s,null,{default:t(()=>[e(m,{class:"mx-auto",outlined:""},{default:t(()=>[e(r,{justify:"center"},{default:t(()=>[e(s,{cols:"10"},{default:t(()=>[b]),_:1})]),_:1}),e(f),e(s),e(r,{justify:"center"},{default:t(()=>[e(s,{cols:"8"},{default:t(()=>[e(_,{variant:"underlined",modelValue:o.fileMax,"onUpdate:modelValue":n[0]||(n[0]=i=>o.fileMax=i),placeholder:"上传文件最大大小（单位：M）",label:"上传文件最大大小（单位：M）",clearable:"",rules:[()=>c.checkNumber()||"必须是数字且不为空"]},null,8,["modelValue","rules"])]),_:1}),e(s,{cols:"2"},{default:t(()=>[e(u,{color:"primary",onClick:n[1]||(n[1]=i=>c.settingFileMax())},{default:t(()=>[d("修改")]),_:1})]),_:1})]),_:1}),e(r,{justify:"center"},{default:t(()=>[e(s,{cols:"8"},{default:t(()=>[e(p,{variant:"underlined",modelValue:o.editType,"onUpdate:modelValue":n[2]||(n[2]=i=>o.editType=i),"item-title":"text","item-value":"value",items:o.items,label:"编辑器选择"},null,8,["modelValue","items"])]),_:1}),e(s,{cols:"2"},{default:t(()=>[e(u,{color:"primary",onClick:n[3]||(n[3]=i=>c.settingFileMax())},{default:t(()=>[d("修改")]),_:1})]),_:1})]),_:1}),e(r,{justify:"center"},{default:t(()=>[e(s,{cols:"10"},{default:t(()=>[d(" wangEditor(HTML) 编辑器的上传功能目前还不够成熟，有待更新！ 注意：修改完成后请刷新浏览器 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(v,{modelValue:o.snackbar,"onUpdate:modelValue":n[4]||(n[4]=i=>o.snackbar=i),timeout:3e3,top:!0},{default:t(()=>[d(g(o.message),1)]),_:1},8,["modelValue"])]),_:1})}const w=x(k,[["render",F]]);export{w as default};
