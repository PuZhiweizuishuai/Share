import{_ as U,c as m,w as t,r,o as _,e as P,v as j,a as e,f as u,h as M,k as C,F as L,i as y,t as v,b as g}from"./index-BHqpIUYW.js";const S={data(){return{user:{username:"",password:"",oldPassword:""},snackbar:!1,message:"",ipdata:"",items:[{createUser:"mdi-share",ip:"分享列表"},{createUser:"mdi-file",ip:"文件列表"},{createUser:"mdi-text",ip:"二维码分享"},{createUser:"mdi-lock",ip:"加密解密"},{createUser:"mdi-wrench",ip:"设置"},{createUser:"mdi-help",ip:"关于"}],loginUserInfo:{},showSysInfo:!1,showLogin:!0,fileMax:0}},created(){this.checkLogin()},methods:{checkLogin(){this.httpGet("/login/check",o=>{o.status==200?(this.showSysInfo=!0,this.showLogin=!1,this.getWhitelist(),this.getFileMax()):(this.showSysInfo=!1,this.showLogin=!0)})},userLogin(){this.httpPost("/login",this.user,o=>{o.data!=null&&o.data!=""?(this.loginUserInfo=o.data,this.showSysInfo=!0,this.showLogin=!1,this.getWhitelist(),this.getFileMax()):(this.message="登录失败",this.snackbar=!0)})},updatePassword(){this.httpPost("/admin/change/password",this.user,o=>{o.data!=null&&o.data!=""?(this.loginUserInfo=o.data,this.showSysInfo=!1,this.showLogin=!0):(this.message="修改失败",this.snackbar=!0)})},addWhitelIP(){this.httpPost("/admin/whitelist/add",this.ipdata,o=>{console.log(o),this.getWhitelist()})},getWhitelist(){this.httpGet("/admin/whitelist",o=>{this.items=o.data})},deleteIP(o){this.httpPost("/admin/whitelist/delete",o,i=>{this.getWhitelist()})},checkNumber(){return!(this.fileMax==null||isNaN(parseInt(this.fileMax)))},settingFileMax(){this.checkNumber()&&this.httpPost("/upload/setting/filemax?type=sysinfo",{uploadFileMax:this.fileMax},o=>{this.message=o.message,this.snackbar=!0})},getFileMax(){this.httpGet("/upload/disk",o=>{this.fileMax=o.data.uploadFileMax})}}},F=g("h2",null,"系统配置：",-1),N=g("h2",null,"IP白名单",-1),W=g("h2",null,"修改密码",-1),B=g("h2",null,"上传文件大小配置",-1);function G(o,i,D,E,s,d){const l=r("v-col"),n=r("v-row"),h=r("v-divider"),c=r("v-text-field"),f=r("v-btn"),p=r("v-card"),w=r("v-list-item-title"),k=r("v-list-item"),b=r("v-list"),x=r("v-snackbar"),V=r("v-container");return _(),m(V,null,{default:t(()=>[P(e(n,{justify:"center",align:"center"},{default:t(()=>[e(l,null,{default:t(()=>[e(p,{class:"mx-auto",outlined:""},{default:t(()=>[e(n,{justify:"center"},{default:t(()=>[e(l,{cols:"10"},{default:t(()=>[F]),_:1})]),_:1}),e(h),e(l),e(n,{justify:"center"},{default:t(()=>[e(l,{cols:"8"},{default:t(()=>[e(c,{modelValue:s.user.username,"onUpdate:modelValue":i[0]||(i[0]=a=>s.user.username=a),placeholder:"账号",label:"账号",clearable:"",variant:"underlined"},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{justify:"center"},{default:t(()=>[e(l,{cols:"8"},{default:t(()=>[e(c,{modelValue:s.user.password,"onUpdate:modelValue":i[1]||(i[1]=a=>s.user.password=a),type:"password",placeholder:"密码",label:"密码",variant:"underlined",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{justify:"center"},{default:t(()=>[e(f,{onClick:d.userLogin,color:"blue"},{default:t(()=>[u(" 登录 ")]),_:1},8,["onClick"])]),_:1}),e(l)]),_:1})]),_:1})]),_:1},512),[[j,s.showLogin]]),s.showSysInfo?(_(),m(n,{key:0,justify:"center",align:"center"},{default:t(()=>[e(l,null,{default:t(()=>[e(p,{class:"mx-auto",outlined:""},{default:t(()=>[e(n,{justify:"center"},{default:t(()=>[e(l,{cols:"10"},{default:t(()=>[N]),_:1})]),_:1}),e(h),e(l),e(n,{justify:"center"},{default:t(()=>[e(l,{cols:"8"},{default:t(()=>[e(b,{density:"compact"},{default:t(()=>[(_(!0),M(L,null,C(s.items,(a,I)=>(_(),m(k,{key:I,value:a,color:"primary"},{prepend:t(()=>[e(f,{color:"error",onClick:T=>d.deleteIP(a),style:{"margin-right":"32px"},density:"compact"},{default:t(()=>[u(" 删除 ")]),_:2},1032,["onClick"])]),default:t(()=>[e(w,null,{default:t(()=>[u(v(a.ip)+" - 创建人："+v(a.createUser),1)]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),_:1}),e(h),e(l),e(n,{justify:"center"},{default:t(()=>[e(l,{cols:"8"},{default:t(()=>[e(c,{modelValue:s.ipdata,"onUpdate:modelValue":i[2]||(i[2]=a=>s.ipdata=a),placeholder:"IP",label:"IP",clearable:"",variant:"underlined"},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{justify:"center"},{default:t(()=>[e(l,{cols:"4"},{default:t(()=>[e(f,{onClick:d.getWhitelist},{default:t(()=>[u(" 刷新 ")]),_:1},8,["onClick"])]),_:1}),e(l,{cols:"4"},{default:t(()=>[e(f,{onClick:d.addWhitelIP,color:"green"},{default:t(()=>[u(" 增加 ")]),_:1},8,["onClick"])]),_:1})]),_:1}),e(l)]),_:1})]),_:1})]),_:1})):y("",!0),s.showSysInfo?(_(),m(n,{key:1,justify:"center",align:"center"},{default:t(()=>[e(l,null,{default:t(()=>[e(p,{class:"mx-auto",outlined:""},{default:t(()=>[e(n,{justify:"center"},{default:t(()=>[e(l,{cols:"10"},{default:t(()=>[W]),_:1})]),_:1}),e(h),e(l),e(n,{justify:"center"},{default:t(()=>[e(l,{cols:"8"},{default:t(()=>[e(c,{modelValue:s.user.username,"onUpdate:modelValue":i[3]||(i[3]=a=>s.user.username=a),placeholder:"账号",label:"账号",clearable:"",variant:"underlined"},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{justify:"center"},{default:t(()=>[e(l,{cols:"8"},{default:t(()=>[e(c,{modelValue:s.user.oldPassword,"onUpdate:modelValue":i[4]||(i[4]=a=>s.user.oldPassword=a),type:"password",placeholder:"旧密码",label:"旧密码",variant:"underlined",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{justify:"center"},{default:t(()=>[e(l,{cols:"8"},{default:t(()=>[e(c,{modelValue:s.user.password,"onUpdate:modelValue":i[5]||(i[5]=a=>s.user.password=a),type:"password",placeholder:"新密码",label:"新密码",variant:"underlined",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{justify:"center"},{default:t(()=>[e(f,{onClick:d.updatePassword},{default:t(()=>[u(" 修改 ")]),_:1},8,["onClick"])]),_:1}),e(l)]),_:1})]),_:1})]),_:1})):y("",!0),s.showSysInfo?(_(),m(n,{key:2,justify:"center",align:"center"},{default:t(()=>[e(l,null,{default:t(()=>[e(p,{class:"mx-auto",outlined:""},{default:t(()=>[e(n,{justify:"center"},{default:t(()=>[e(l,{cols:"10"},{default:t(()=>[B]),_:1})]),_:1}),e(h),e(l),e(n,{justify:"center"},{default:t(()=>[e(l,{cols:"8"},{default:t(()=>[e(c,{variant:"underlined",modelValue:s.fileMax,"onUpdate:modelValue":i[6]||(i[6]=a=>s.fileMax=a),placeholder:"上传文件最大大小（单位：M）",label:"上传文件最大大小（单位：M）",clearable:"",rules:[()=>d.checkNumber()||"必须是数字且不为空"]},null,8,["modelValue","rules"])]),_:1}),e(l,{cols:"2"},{default:t(()=>[e(f,{color:"primary",onClick:i[7]||(i[7]=a=>d.settingFileMax())},{default:t(()=>[u("修改")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):y("",!0),e(x,{modelValue:s.snackbar,"onUpdate:modelValue":i[8]||(i[8]=a=>s.snackbar=a),timeout:3e3,top:!0},{default:t(()=>[u(v(s.message),1)]),_:1},8,["modelValue"])]),_:1})}const z=U(S,[["render",G]]);export{z as default};
